{% extends "base.html.j2" %}
{% block title %}Archive &middot; {{ SITENAME }}{% endblock %}
{% block description %}Everything on {{ SITENAME }}, organised by Date.{% endblock %}
{% block extrahead %}<link rel="stylesheet" media="all" href="{{ SITEURL }}/theme/css/archive.css" />{% endblock %}

{% block content %}
<article>

    <div class="title">
        <div class="content-title">
            <h1>Archive</h1>
        </div>
    </div>

    <div class="main archive">

    <section class="content" itemprop="text articleBody">
      {% for year, date_year in dates|groupby( 'date.year' )|sort(reverse=True) %}
      <h2 class="archive-year">{{ year }}</h2>
      {% for month, date_month in date_year|groupby( 'date.month' )|sort(reverse=True)
      %}
      <h3>{{ month|month_name }}</h3>

      <table class="archive">
        <col style="width: 20%; text-align: right" />
        <col style="width: 80%" />
        <tbody>
          {% for article in date_month %}
          <tr>
            <td>
              {{ article.date|archive_date_format }}<br />
              <span class="smallprint"
                >{{ article.stats['read_mins'] }} min read</span
              >
            </td>
            <td>
              <h4>
                <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a>
              </h4>
              <p class="smallprint">{{ article.meta_description }}</p>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% endfor %}
      {% endfor %}
    </section>
</div>
{% endblock %}
